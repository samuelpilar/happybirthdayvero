<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy 22nd, My Princess ‚ú®</title>

<style>
:root{
  --ink:#1f2a21;
  --bg0:#fbfaf6;
  --bg1:#f3efe6;
  --green:#a9cbb1;
  --brown:#c9a982;
  --shadow:0 12px 40px rgba(31,42,33,.18);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color:var(--ink);
  background:
    radial-gradient(900px 700px at 15% 10%, rgba(169,203,177,.45), transparent 60%),
    radial-gradient(900px 700px at 85% 20%, rgba(201,169,130,.45), transparent 55%),
    linear-gradient(180deg,var(--bg0),var(--bg1));
  overflow-x:hidden;
}

/* ===== AMBIENT BUTTERFLIES (NO FALLING) ===== */
.butterflies{
  position:fixed; inset:0;
  pointer-events:none;
  z-index:2;
}
.butterfly{
  position:absolute;
  font-size:20px;
  opacity:.22;
  animation: drift var(--dur) ease-in-out infinite alternate;
}
@keyframes drift{
  from{ transform: translateX(0) translateY(0); }
  to{ transform: translateX(var(--dx)) translateY(calc(var(--dy) * 0.2)); }
}

/* ===== OPENING BUTTERFLIES (TEMPORARY FALL) ===== */
.butterfly-fall{
  position:fixed;
  top:-30px;
  font-size:22px;
  opacity:1;
  animation: fallFade 1.5s ease-out forwards;
  pointer-events:none;
  z-index:7;
}
@keyframes fallFade{
  0%{
    transform: translateY(0) rotate(0deg);
    opacity:1;
  }
  100%{
    transform: translateY(140vh) rotate(60deg);
    opacity:0;
  }
}

/* ===== FIREFLIES ABOVE CONTENT ===== */
.fireflies{
  position:fixed; inset:0;
  pointer-events:none;
  z-index:6;
  mix-blend-mode:screen;
}
.fly{
  position:absolute;
  width:6px;height:6px;border-radius:50%;
  background:radial-gradient(circle,#fff,rgba(255,230,160,.6),transparent 70%);
  box-shadow:0 0 14px rgba(255,230,160,.6);
  opacity:.6;
  animation: float var(--dur) ease-in-out infinite alternate;
}
@keyframes float{
  from{transform:translate(0,0)}
  to{transform:translate(var(--dx),var(--dy))}
}

/* ===== CONFETTI (ON OPEN ONLY) ===== */
#confetti{
  position:fixed; inset:0;
  pointer-events:none;
  z-index:8;
}

/* ===== CARD ===== */
.wrap{
  min-height:100vh;
  display:flex;
  justify-content:center;
  padding:20px;
  position:relative;
  z-index:5;
}
.card{
  width:min(560px,100%);
  background:rgba(255,255,255,.75);
  border-radius:22px;
  box-shadow:var(--shadow);
  backdrop-filter:blur(10px);
  overflow:hidden;
}
header{padding:20px}
h1{margin:12px 0 6px;font-size:36px}
.sub{margin:0;font-size:14px;opacity:.85}

.section{padding:20px;display:grid;gap:16px}

.note-box{
  background:rgba(232,242,234,.7);
  border-radius:18px;
  padding:14px;
}
.note-title{
  font-weight:800;
  font-size:12px;
  text-transform:uppercase;
  margin:0 0 6px;
}
.note{
  margin:0;
  font-size:15px;
  line-height:1.55;
  white-space:pre-line;
}

.block{
  background:rgba(255,255,255,.7);
  border-radius:18px;
  padding:14px;
}
.progress{
  height:8px;
  background:#e5e5e5;
  border-radius:999px;
  overflow:hidden;
}
.bar{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,var(--green),var(--brown));
  transition:width .4s ease;
}

button{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:0;
  font-weight:800;
  background:var(--green);
  margin-top:10px;
}

.reveal{display:none;margin-top:12px}
.reveal.show{display:block}

footer{
  padding:14px;
  font-size:12px;
  opacity:.7;
  display:flex;
  justify-content:space-between;
}
</style>
</head>

<body>
<canvas id="confetti"></canvas>
<div class="butterflies" id="butterflies"></div>
<div class="fireflies" id="fireflies"></div>

<div class="wrap">
  <div class="card">
    <header>
      <h1>Happy 22nd, my princess ‚ú®</h1>
      <p class="sub">A present, from my heart ‚Äî just for you.</p>
    </header>

    <section class="section">
      <div class="note-box">
        <p class="note-title">A note from Samu</p>
        <p class="note" id="noteText"></p>
      </div>

      <div class="block">
        <p><strong>Your gift üéÅ</strong></p>
        <div class="progress"><div class="bar" id="bar"></div></div>
        <button id="openBtn">Open your present</button>
        <div class="reveal" id="reveal">
          <p id="giftText"></p>
        </div>
      </div>
    </section>

    <footer>
      <span id="date"></span>
      <span>üåø</span>
    </footer>
  </div>
</div>

<script>
/* TEXT */
noteText.textContent =
`Happy birthday ü§ç
Thank you for being exactly who you are ‚Äî your kindness, your depth, and the calm you bring mean more to me than you know.
I‚Äôm really grateful for you today and always.`;

giftText.textContent =
`Today isn‚Äôt just about candles or wishes.
It‚Äôs about the quiet way you exist‚Äî
how you make space feel warmer
just by being in it.

You‚Äôve taught me that feeling deeply
isn‚Äôt weakness,
that a heart can be both gentle and strong
without apologizing for either.

You bring clarity without forcing answers,
light without asking to be followed.
And somehow, being close to you
makes the world feel more honest.

So today, I celebrate you‚Äî
your presence, your timing,
the calm and the spark you carry so naturally.

Happy birthday.
I‚Äôm grateful for you,
and for every moment
your heart chooses to stay.

‚Äî yours, always üåø`;

date.textContent = new Date().toDateString();

/* AMBIENT BUTTERFLIES */
const bf = document.getElementById("butterflies");
for(let i=0;i<10;i++){
  const b=document.createElement("div");
  b.className="butterfly";
  b.textContent="ü¶ã";
  b.style.left=Math.random()*100+"vw";
  b.style.top=Math.random()*100+"vh";
  b.style.setProperty("--dx",(Math.random()*120-60)+"px");
  b.style.setProperty("--dy",(Math.random()*20-10)+"px");
  b.style.setProperty("--dur",(6+Math.random()*6)+"s");
  bf.appendChild(b);
}

/* FIREFLIES */
const ff=document.getElementById("fireflies");
for(let i=0;i<14;i++){
  const f=document.createElement("div");
  f.className="fly";
  f.style.left=Math.random()*100+"vw";
  f.style.top=Math.random()*100+"vh";
  f.style.setProperty("--dx",(Math.random()*120-60)+"px");
  f.style.setProperty("--dy",(Math.random()*120-60)+"px");
  f.style.setProperty("--dur",(4+Math.random()*4)+"s");
  ff.appendChild(f);
}

/* CONFETTI */
const canvas=document.getElementById("confetti");
const ctx=canvas.getContext("2d");
function resize(){canvas.width=innerWidth;canvas.height=innerHeight}
resize();addEventListener("resize",resize);

let pieces=[];
function confettiBurst(){
  for(let i=0;i<140;i++){
    pieces.push({
      x:Math.random()*canvas.width,
      y:-10,
      vy:2+Math.random()*4,
      s:4+Math.random()*4,
      c:`hsl(${Math.random()*360},70%,80%)`
    });
  }
}
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  pieces.forEach(p=>{
    p.y+=p.vy;
    ctx.fillStyle=p.c;
    ctx.fillRect(p.x,p.y,p.s,p.s);
  });
  pieces=pieces.filter(p=>p.y<canvas.height+20);
  requestAnimationFrame(draw);
}
draw();

/* OPENING BUTTERFLIES (ONCE) */
function butterflyFallOnce(count=18){
  for(let i=0;i<count;i++){
    const b=document.createElement("div");
    b.className="butterfly-fall";
    b.textContent="ü¶ã";
    b.style.left=Math.random()*100+"vw";
    b.style.animationDelay=(Math.random()*0.2)+"s";
    document.body.appendChild(b);
    setTimeout(()=>b.remove(),1500);
  }
}

/* GIFT LOGIC */
let taps=0;
const REQUIRED=3;

openBtn.addEventListener("click",()=>{
  if(taps>=REQUIRED) return;
  taps++;
  bar.style.width=(taps/REQUIRED*100)+"%";

  if(taps===REQUIRED){
    reveal.classList.add("show");
    openBtn.disabled=true;
    confettiBurst();
    butterflyFallOnce(); // ü¶ã ONLY HERE
  }
});
</script>
</body>
</html>
